<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta
      name="viewport"
      content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="description" content="Web-banking" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <!-- https://developers.google.com/web/fundamentals/web-app-manifest/ -->
    <link rel="manifest" href="/manifest.json" />
    <title>Banking - Swan</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="app-root"></div>
    <div id="card-root"></div>
    <div id="full-page-layer-root"></div>
    <script>
      window.global = window;
    </script>
    <script>
      document.write("<" + 'script src="/locales.js"' + ">" + "<" + "/script>");
      document.write("<" + 'script src="/env.js"' + ">" + "<" + "/script>");
    </script>
    <script type="module">
      (async availableLocales => {
        const locale =
          [
            new URLSearchParams(location.search).get("lang"),
            (() => {
              try {
                return localStorage.getItem("swan__PreferredLanguage");
              } catch (err) {}
            })(),
            navigator.languages,
          ]
            .filter(item => item != null)
            .map(item => item.slice(0, 2))
            .find(item => availableLocales.has(item)) ?? "en";

        window.__locales = await Promise.all([
          import(`./locales/${locale}.json`),
          await import(`../../../node_modules/@swan-io/shared-business/src/locales/${locale}.json`),
        ]).then(values => Object.assign({}, ...values));
        await import("./index.tsx");
      })(new Set(__availableLocales));
    </script>
  </body>
</html>
