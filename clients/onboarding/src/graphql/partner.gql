fragment Address on AddressInfo {
  addressLine1
  addressLine2
  city
  country
  postalCode
  state
}

fragment BirthInfo on BirthInfo {
  city
  country
  postalCode
  birthDate
}

fragment OnboardingStatus on OnboardingStatusInfo {
  __typename
  status
  ... on OnboardingInvalidStatusInfo {
    errors {
      field
      errors
    }
  }
}

fragment SupportingDocumentCollection on SupportingDocumentCollection {
  id
  requiredSupportingDocumentPurposes {
    name
  }
  statusInfo {
    status
  }
  supportingDocuments {
    id
    supportingDocumentPurpose
    supportingDocumentType
    statusInfo {
      status
    }
  }
}
fragment CompanyInfo on CompanyInfo {
  registrationNumber
  name
  tradeName
  registrationDate
  legalForm
  vatNumber
  taxIdentificationNumber
  businessActivityDescription
  businessClassificationCode
  address {
    ...Address
  }
  headcount
  forecastYearlyIncome
  monthlyPaymentVolume
  regulatoryClassification
  websites
  companyType
}

fragment IndividualOrCompanyOnboarding on AccountHolderOnboardingBase {
  id
  oAuthRedirectParameters {
    redirectUrl
  }
  statusInfo {
    ...OnboardingStatus
  }
  supportingDocumentCollection {
    ...SupportingDocumentCollection
  }
  projectInfo {
    id
    # name
    accentColor
    logoUri
  }
}

fragment CompanyOnboarding on CompanyAccountHolderOnboarding {
  ...IndividualOrCompanyOnboarding
  accountInfo {
    name
    country
  }
  accountAdmin {
    birthInfo {
      ...BirthInfo
    }
    email
    firstName
    preferredLanguage
    lastName
    nationality
    address {
      ...Address
    }
    taxIdentificationNumber
    typeOfRepresentation
  }
  company {
    ...CompanyInfo
  }
}

fragment IndividualOnboarding on IndividualAccountHolderOnboarding {
  ...IndividualOrCompanyOnboarding
  accountInfo {
    name
    country
  }
  accountAdmin {
    birthInfo {
      ...BirthInfo
    }
    email
    employmentStatus
    firstName
    preferredLanguage
    lastName
    monthlyIncome
    nationality
    address {
      ...Address
    }
    taxIdentificationNumber
  }
}

query GetPublicOnboarding($id: ID!) {
  publicAccountHolderOnboarding(id: $id) {
    __typename
    ... on PublicAccountHolderOnboardingSuccessPayload {
      onboarding {
        ...CompanyOnboarding
        ...IndividualOnboarding
      }
    }
    ... on OnboardingNotFoundRejection {
      id
    }
    ... on OnboardingAlreadyFinalizedRejection {
      __typename
    }
    ... on InternalErrorRejection {
      __typename
    }
    ... on ForbiddenRejection {
      __typename
      message
    }
    ... on PublicOnboardingDisabledRejection {
      __typename
    }
  }
}

query GetPublicCompamyInfoRegistryData($input: PublicCompanyInfoRegistryDataInput!) {
  publicCompanyInfoRegistryData(input: $input) {
    ... on PublicCompanyInfoRegistryDataSuccessPayload {
      companyInfo {
        ...CompanyInfo
      }
    }
    ... on Rejection {
      message
    }
  }
}

fragment UpdateValidationErrors on ValidationRejection {
  __typename
  fields {
    path
    code
    message
  }
}

mutation UpdatePublicIndividualAccountHolderOnboarding(
  $input: UpdatePublicIndividualAccountHolderOnboardingInput!
) {
  updatePublicIndividualAccountHolderOnboarding(input: $input) {
    ... on UpdatePublicIndividualAccountHolderOnboardingSuccessPayload {
      onboarding {
        ...IndividualOnboarding
      }
    }
    ... on ValidationRejection {
      ...UpdateValidationErrors
    }
  }
}

mutation UpdatePublicCompanyAccountHolderOnboarding(
  $input: UpdatePublicCompanyAccountHolderOnboardingInput!
) {
  updatePublicCompanyAccountHolderOnboarding(input: $input) {
    ... on UpdatePublicCompanyAccountHolderOnboardingSuccessPayload {
      onboarding {
        ...CompanyOnboarding
      }
    }
    ... on ValidationRejection {
      ...UpdateValidationErrors
    }
  }
}

mutation GenerateSupportingDocumentUploadUrl($input: GenerateSupportingDocumentUploadUrlInput!) {
  generateSupportingDocumentUploadUrl(input: $input) {
    __typename
    ... on GenerateSupportingDocumentUploadUrlSuccessPayload {
      supportingDocumentId
      upload {
        fields {
          key
          value
        }
        url
      }
    }
  }
}

mutation DeleteSupportingDocument($input: DeleteSupportingDocumentInput!) {
  deleteSupportingDocument(input: $input) {
    __typename
    ... on DeleteSupportingDocumentSuccessPayload {
      id
    }
    ... on Rejection {
      message
    }
  }
}
