fragment PublicAddress on AddressInfo {
  addressLine1
  addressLine2
  city
  country
  postalCode
  state
}

fragment PublicBirthInfo on BirthInfo {
  city
  country
  postalCode
  birthDate
}

fragment PublicOnboardingStatus on OnboardingStatusInfo {
  __typename
  status
  ... on OnboardingInvalidStatusInfo {
    errors {
      field
      errors
    }
  }
}

fragment PublicSupportingDocumentCollection on SupportingDocumentCollection {
  id
  requiredSupportingDocumentPurposes {
    name
  }
  statusInfo {
    status
  }
  projectInfo {
    id
    accentColor
    name
    logoUri
    #tcuDocumentUri(language: $language)
  }
  supportingDocuments {
    id
    supportingDocumentPurpose
    supportingDocumentType
    statusInfo {
      status
    }
  }
}

fragment PublicCompanyOnboarding on CompanyAccountHolderOnboarding {
  __typename
  id
  statusInfo {
    ...PublicOnboardingStatus
  }
  supportingDocumentCollection {
    ...PublicSupportingDocumentCollection
  }
  accountInfo {
    name
    country
  }
  accountAdmin {
    birthInfo {
      ...PublicBirthInfo
    }
    email
    firstName
    preferredLanguage
    lastName
    nationality
    address {
    ...PublicAddress
    }
    taxIdentificationNumber
    typeOfRepresentation
  }
  company {
    registrationNumber
    name
    tradeName
    registrationDate
    legalForm
    vatNumber
    taxIdentificationNumber
    businessActivityDescription
    address {
      ...PublicAddress
    }
  }
}

fragment PublicIndividualOnboarding on IndividualAccountHolderOnboarding {
  __typename
  id
  statusInfo {
    ...PublicOnboardingStatus
  }
  supportingDocumentCollection {
    ...PublicSupportingDocumentCollection
  }
  accountInfo {
    name
    country
  }
  accountAdmin {
    birthInfo {
      ...PublicBirthInfo
    }
    email
    employmentStatus
    firstName
    preferredLanguage
    lastName
    monthlyIncome
    nationality
    address {
      ...PublicAddress
    }
    taxIdentificationNumber
  }
}

query GetPublicOnboarding($id: ID!) {
  publicAccountHolderOnboarding(id: $id) {
    __typename
    ... on PublicAccountHolderOnboardingSuccessPayload {
      onboarding {
        ...PublicCompanyOnboarding
        ...PublicIndividualOnboarding
      }
    }
    ... on OnboardingNotFoundRejection {
      id
    }
    ... on OnboardingAlreadyFinalizedRejection {
      __typename
    }
    ... on InternalErrorRejection {
      __typename
    }
    ... on ForbiddenRejection {
      __typename
      message
    }
    ... on PublicOnboardingDisabledRejection {
      __typename
    }
  }
}
