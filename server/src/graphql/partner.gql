query ProjectId {
  projectInfo {
    id
  }
}

fragment OnboardingRedirectInfo on Onboarding {
  __typename
  id
  account {
    legalRepresentativeMembership {
      id
    }
  }
  statusInfo {
    __typename
    status
  }
  oAuthRedirectParameters {
    state
    redirectUrl
  }
}

query GetAccountMembershipInvitationData(
  $inviterAccountMembershipId: ID!
  $inviteeAccountMembershipId: ID!
) {
  projectInfo {
    id
    name
    accentColor
    logoUri
  }
  inviterAccountMembership: accountMembership(id: $inviterAccountMembershipId) {
    email
    user {
      firstName
      preferredLastName
      fullName
    }
    account {
      name
      number
      holder {
        info {
          ... on AccountHolderCompanyInfo {
            name
          }
          ... on AccountHolderIndividualInfo {
            name
          }
        }
      }
    }
  }
  inviteeAccountMembership: accountMembership(id: $inviteeAccountMembershipId) {
    id
    email
    statusInfo {
      __typename
      ... on AccountMembershipInvitationSentStatusInfo {
        restrictedTo {
          firstName
          phoneNumber
        }
      }
    }
  }
}

mutation FinalizeOnboarding($input: FinalizeOnboardingInput!) {
  finalizeOnboarding(input: $input) {
    __typename
    ... on Rejection {
      message
    }
    ... on FinalizeOnboardingSuccessPayload {
      onboarding {
        __typename
        ...OnboardingRedirectInfo
      }
    }
  }
}

# used for onboarding v2
mutation FinalizeAccountHolderOnboarding($input: FinalizeAccountHolderOnboardingInput!) {
  finalizeAccountHolderOnboarding(input: $input) {
    ... on FinalizeAccountHolderOnboardingSuccessPayload {
      onboarding {
        ... on CompanyAccountHolderOnboarding {
          id
          oAuthRedirectParameters {
            redirectUrl
            state
          }
        }
        ... on IndividualAccountHolderOnboarding {
          id
          oAuthRedirectParameters {
            redirectUrl
            state
          }
        }
      }
    }
    ... on Rejection {
      message
    }
  }
}

mutation BindAccountMembership($input: BindAccountMembershipInput!) {
  bindAccountMembership(input: $input) {
    __typename
    ... on BindAccountMembershipSuccessPayload {
      accountMembership {
        id
      }
    }
    ... on Rejection {
      message
    }
  }
}

mutation CreatePublicIndividualAccountHolderOnboarding(
  $input: CreatePublicIndividualAccountHolderOnboardingInput!
) {
  createPublicIndividualAccountHolderOnboarding(input: $input) {
    ... on CreatePublicIndividualAccountHolderOnboardingSuccessPayload {
      onboarding {
        id
      }
    }
    ... on ForbiddenRejection {
      message
    }
    ... on ValidationRejection {
      message
    }
    ... on PublicOnboardingDisabledRejection {
      message
    }
  }
}

mutation CreatePublicCompanyAccountHolderOnboarding(
  $input: CreatePublicCompanyAccountHolderOnboardingInput!
) {
  createPublicCompanyAccountHolderOnboarding(input: $input) {
    ... on CreatePublicCompanyAccountHolderOnboardingSuccessPayload {
      onboarding {
        id
      }
    }
    ... on ForbiddenRejection {
      message
    }
    ... on ValidationRejection {
      message
    }
    ... on PublicOnboardingDisabledRejection {
      message
    }
  }
}

fragment WebBankingSettings on WebBankingSettings {
  canViewAccountStatement
  canViewAccountDetails
  canAddNewMembers
  canViewMembers
  canViewPaymentList
  canOrderPhysicalCards
  canInitiatePaymentsToNewBeneficiaries
  canOrderVirtualCards
  canManageVirtualIbans
  canCreateMerchantProfile
  canRequestOnlineCardsPaymentMethod
  canRequestSepaDirectDebitCorePaymentMethod
  canRequestSepaDirectDebitB2BPaymentMethod
  canRequestInternalDirectDebitCorePaymentMethod
  canRequestInternalDirectDebitB2BPaymentMethod
  canRequestChecksPaymentMethod
  canInitiateCheckMerchantPayments
  canCreateMerchantPaymentLinks
  canUpdateCards
}

query WebBankingSettings {
  projectInfo {
    webBankingSettings {
      ...WebBankingSettings
    }
  }
}
